<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Miao</title>
    <style>
        /* ==========================================
           1. CSS 变量主题配置 (Theme Variables)
           通过修改这里的颜色，可以轻松改变两种状态的视觉
           ========================================== */
        :root {
            /* --- 状态 A：奢华黑金 (Luxury Gold) --- */
            --bg-center: #1c0e11;
            --bg-mid: #050304;
            --bg-edge: #000000;
            
            /* 爱心金属渐变 */
            --heart-c1: #fdf4d4;
            --heart-c2: #d4af37;
            --heart-c3: #8a5a19;
            --heart-c4: #3a1c0d;
            --heart-c5: #140603;
            --heart-stroke: #b58d27;
            
            /* 爱心外发光 */
            --heart-glow-1: rgba(212, 175, 55, 0.4);
            --heart-glow-2: rgba(184, 15, 33, 0.2);
            
            /* 文字渐变 */
            --text-c1: #9b7625;
            --text-c2: #d4af37;
            --text-c3: #fff8dc;
        }

        /* --- 状态 B：冰蓝纯洁风 (Pure Blue) --- */
        body.theme-pure {
            --bg-center: #ffffff;
            --bg-mid: #e1f5fe;
            --bg-edge: #b3e5fc;
            
            /* 爱心水晶/冰雪渐变 */
            --heart-c1: #ffffff;
            --heart-c2: #b2ebf2;
            --heart-c3: #26c6da;
            --heart-c4: #00838f;
            --heart-c5: #004d40;
            --heart-stroke: #80deea;
            
            /* 爱心外发光 (清澈的蓝光) */
            --heart-glow-1: rgba(0, 188, 212, 0.5);
            --heart-glow-2: rgba(255, 255, 255, 0.8);
            
            /* 文字渐变 */
            --text-c1: #006064;
            --text-c2: #00acc1;
            --text-c3: #ffffff;
        }

        /* ==========================================
           2. 基础样式与过渡设置 (Base & Transitions)
           ========================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            /* 背景应用 CSS 变量，并添加平滑过渡 */
            background: radial-gradient(ellipse at center, var(--bg-center) 0%, var(--bg-mid) 60%, var(--bg-edge) 100%);
            transition: background 0.8s ease-in-out;
            font-family: 'Playfair Display', 'Didot', 'Bodoni MT', 'Times New Roman', serif;
            -webkit-font-smoothing: antialiased;
        }

        #particle-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* ==========================================
           3. 主体爱心与交互容器 (Heart Container)
           ========================================== */
        .content-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }

        .heart-btn {
            position: relative;
            width: 240px;
            height: 240px;
            cursor: pointer;
            animation: floatAndPulse 4s ease-in-out infinite;
            /* 辉光应用 CSS 变量 */
            filter: drop-shadow(0 0 30px var(--heart-glow-1)) drop-shadow(0 0 70px var(--heart-glow-2));
            transition: transform 0.1s cubic-bezier(0.2, 0.8, 0.2, 1), filter 0.8s ease;
            -webkit-tap-highlight-color: transparent;
        }

        /* 点击瞬间的收缩爆发状态 */
        .heart-btn.clicked {
            transform: scale(0.85) !important;
            filter: drop-shadow(0 0 60px var(--heart-c2)) brightness(1.5) !important;
        }

        @media (max-width: 768px) {
            .heart-btn {
                width: 180px;
                height: 180px;
            }
        }

        .luxury-heart-svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        /* SVG 内的渐变色过渡（部分现代浏览器支持 stop-color 的 transition） */
        stop {
            transition: stop-color 0.8s ease-in-out;
        }
        use {
            transition: stroke 0.8s ease-in-out;
        }

        /* ==========================================
           4. 文字排版 (Typography)
           ========================================== */
        .luxury-text {
            margin-top: 50px;
            font-size: 2.2rem;
            font-weight: 400;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            /* 文字颜色应用 CSS 变量 */
            background: linear-gradient(
                to right,
                var(--text-c1) 0%,
                var(--text-c2) 25%,
                var(--text-c3) 50%,
                var(--text-c2) 75%,
                var(--text-c1) 100%
            );
            background-size: 200% auto;
            color: #000;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0px 4px 15px var(--heart-glow-1);
            animation: textShine 6s linear infinite;
            transition: text-shadow 0.8s ease, opacity 0.3s ease;
            user-select: none;
        }

        /* 切换文字时的淡入淡出动画类 */
        .text-fade-out { opacity: 0; }
        .text-fade-in { opacity: 1; }

        @media (max-width: 768px) {
            .luxury-text {
                font-size: 1.5rem;
                letter-spacing: 0.15em;
                margin-top: 40px;
            }
        }

        /* ==========================================
           5. 动画定义 (Keyframes)
           ========================================== */
        @keyframes floatAndPulse {
            0% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.03); }
            100% { transform: translateY(0) scale(1); }
        }

        @keyframes textShine {
            0% { background-position: 200% center; }
            100% { background-position: -200% center; }
        }
    </style>
</head>
<body>

    <canvas id="particle-canvas"></canvas>

    <div class="content-wrapper">
        <div class="heart-btn" id="heart-element">
            <svg class="luxury-heart-svg" viewBox="0 0 100 100">
                <defs>
                    <radialGradient id="heart-base" cx="35%" cy="30%" r="70%">
                        <stop offset="0%" stop-color="var(--heart-c1)"/>
                        <stop offset="20%" stop-color="var(--heart-c2)"/>
                        <stop offset="50%" stop-color="var(--heart-c3)"/>
                        <stop offset="85%" stop-color="var(--heart-c4)"/>
                        <stop offset="100%" stop-color="var(--heart-c5)"/>
                    </radialGradient>

                    <linearGradient id="glass-glaze" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="rgba(255, 255, 255, 0.9)"/>
                        <stop offset="40%" stop-color="rgba(255, 255, 255, 0.15)"/>
                        <stop offset="100%" stop-color="rgba(255, 255, 255, 0)"/>
                    </linearGradient>

                    <linearGradient id="shimmer-sweep" x1="-100%" y1="0%" x2="0%" y2="0%">
                        <stop offset="0%" stop-color="rgba(255,255,255,0)" />
                        <stop offset="45%" stop-color="rgba(255,255,255,0)" />
                        <stop offset="50%" stop-color="rgba(255,255,255,0.8)" />
                        <stop offset="55%" stop-color="rgba(255,255,255,0)" />
                        <stop offset="100%" stop-color="rgba(255,255,255,0)" />
                        <animate attributeName="x1" values="-150%; 200%" dur="3s" repeatCount="indefinite" />
                        <animate attributeName="x2" values="-50%; 300%" dur="3s" repeatCount="indefinite" />
                    </linearGradient>

                    <path id="heart-path" d="M 50,85 C 50,85 12,58 12,30 C 12,16 26,10 38,18 C 44,22 50,30 50,30 C 50,30 56,22 62,18 C 74,10 88,16 88,30 C 88,58 50,85 50,85 Z" />
                </defs>

                <use href="#heart-path" fill="url(#heart-base)" stroke="var(--heart-stroke)" stroke-width="0.5" />
                
                <use href="#heart-path" fill="none" stroke="rgba(255,255,255,0.4)" stroke-width="1.5" transform="scale(0.95) translate(2.5, 3)" />

                <path d="M 50,40 C 50,40 18,32 15,22 C 14,15 28,12 38,18 C 44,22 50,30 50,30 C 50,30 56,22 62,18 C 72,12 86,15 85,22 C 82,32 50,40 50,40 Z" fill="url(#glass-glaze)" />

                <use href="#heart-path" fill="url(#shimmer-sweep)" style="mix-blend-mode: overlay;" />
            </svg>
        </div>

        <h1 class="luxury-text" id="main-text">For Miao Yu</h1>
    </div>

    <script>
        /* ==========================================
           6. 主题与全局参数配置 (Theme & Config)
           ========================================== */
        const THEMES = {
            gold: {
                text: "For Miao Yu",
                // 金色系粒子：香槟金、纯金、暖白
                particles: ['rgba(212, 175, 55, 0.9)', 'rgba(255, 215, 0, 1)', 'rgba(255, 248, 220, 0.8)'],
                // 拖影底色：深邃黑红
                bgBlur: ['rgba(28, 14, 17, 0.25)', 'rgba(5, 3, 4, 0.25)', 'rgba(0, 0, 0, 0.25)']
            },
            pure: {
                text: "For Miao Yu",
                // 纯净系粒子：冰蓝、青色、纯白
                particles: ['rgba(255, 255, 255, 1)', 'rgba(128, 222, 234, 0.9)', 'rgba(0, 188, 212, 0.8)'],
                // 拖影底色：明亮冰蓝
                bgBlur: ['rgba(255, 255, 255, 0.35)', 'rgba(225, 245, 254, 0.35)', 'rgba(179, 229, 252, 0.35)']
            }
        };

        let currentTheme = 'gold'; // 初始主题

        const CONFIG = {
            PARTICLE_COUNT: 100,
            BURST_COUNT: 100,
            PARTICLE_SPEED_BASE: 0.4,
            PARTICLE_SIZE_MAX: 3,
            ATTRACT_RADIUS: 200,
            ATTRACT_FORCE: 0.025
        };

        /* ==========================================
           7. 粒子系统引擎 (Particle Engine)
           ========================================== */
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d', { alpha: false });
        let width, height;
        let particles = [];
        let heartCenter = { x: 0, y: 0 };

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            const heartEl = document.getElementById('heart-element');
            const rect = heartEl.getBoundingClientRect();
            heartCenter.x = rect.left + rect.width / 2;
            heartCenter.y = rect.top + rect.height / 2;
        }
        window.addEventListener('resize', resize);

        function random(min, max) { return Math.random() * (max - min) + min; }

        function getRandomColor() {
            const palette = THEMES[currentTheme].particles;
            return palette[Math.floor(Math.random() * palette.length)];
        }

        class Particle {
            constructor(x, y, isBurst = false) {
                this.x = x !== undefined ? x : random(0, width);
                this.y = y !== undefined ? y : random(0, height);
                
                if (isBurst) {
                    const angle = random(0, Math.PI * 2);
                    // 爆发速度更快，效果更张扬
                    const speed = random(5, 18);
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                    this.size = random(2, 5);
                    this.life = random(0.6, 1.2);
                    this.decay = random(0.015, 0.03);
                    this.isBurst = true;
                } else {
                    this.vx = random(-CONFIG.PARTICLE_SPEED_BASE, CONFIG.PARTICLE_SPEED_BASE);
                    this.vy = random(-CONFIG.PARTICLE_SPEED_BASE, -CONFIG.PARTICLE_SPEED_BASE * 3);
                    this.size = random(0.8, CONFIG.PARTICLE_SIZE_MAX);
                    this.life = random(0.3, 0.8);
                    this.decay = 0;
                    this.isBurst = false;
                }
                
                // 初始化颜色时，绑定当前主题色
                this.color = getRandomColor();
                this.baseAlpha = this.life;
            }

            update() {
                if (this.isBurst) {
                    this.vx *= 0.9; // 空气阻力
                    this.vy *= 0.9;
                    this.life -= this.decay;
                    this.x += this.vx;
                    this.y += this.vy;
                    return; 
                }

                const dx = heartCenter.x - this.x;
                const dy = heartCenter.y - this.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                // 星云漩涡吸引力场
                if (distance < CONFIG.ATTRACT_RADIUS) {
                    const forceDirectionX = dx / distance;
                    const forceDirectionY = dy / distance;
                    const force = (CONFIG.ATTRACT_RADIUS - distance) / CONFIG.ATTRACT_RADIUS;
                    
                    this.vx += forceDirectionX * CONFIG.ATTRACT_FORCE + (forceDirectionY * 0.015);
                    this.vy += forceDirectionY * CONFIG.ATTRACT_FORCE - (forceDirectionX * 0.015);
                }

                this.x += this.vx;
                this.y += this.vy;

                this.vx += random(-0.015, 0.015);
                this.vy += random(-0.015, 0.015);

                const maxSpeed = 2;
                const currentSpeed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                if (currentSpeed > maxSpeed) {
                    this.vx = (this.vx / currentSpeed) * maxSpeed;
                    this.vy = (this.vy / currentSpeed) * maxSpeed;
                }

                if (this.x < 0) this.x = width;
                if (this.x > width) this.x = 0;
                if (this.y < 0) {
                    this.y = height;
                    this.x = random(0, width);
                    this.color = getRandomColor(); // 越界重生时更新颜色（适配主题切换）
                }
                if (this.y > height) this.y = 0;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                
                let currentAlpha = this.isBurst ? this.life : this.baseAlpha;
                if (currentAlpha < 0) currentAlpha = 0;

                const colorStr = this.color.replace(/[\d\.]+\)$/g, currentAlpha + ')');
                ctx.fillStyle = colorStr;
                
                if (this.size > 2) {
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = colorStr;
                } else {
                    ctx.shadowBlur = 0;
                }
                
                ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < CONFIG.PARTICLE_COUNT; i++) {
                particles.push(new Particle());
            }
        }

        /* ==========================================
           8. 交互逻辑：魔法切换 (Theme Toggle)
           ========================================== */
        const heartEl = document.getElementById('heart-element');
        const textEl = document.getElementById('main-text');

        function toggleThemeAndBurst() {
            // 1. 触发点击爆发动画
            heartEl.classList.add('clicked');
            setTimeout(() => heartEl.classList.remove('clicked'), 150);

            // 2. 切换主题状态
            currentTheme = currentTheme === 'gold' ? 'pure' : 'gold';
            
            // 切换 body 的 class，触发 CSS 颜色过渡
            if (currentTheme === 'pure') {
                document.body.classList.add('theme-pure');
            } else {
                document.body.classList.remove('theme-pure');
            }

            // 3. 优雅地更换文案
            textEl.classList.add('text-fade-out');
            setTimeout(() => {
                textEl.innerText = THEMES[currentTheme].text;
                textEl.classList.remove('text-fade-out');
                textEl.classList.add('text-fade-in');
            }, 300); // 等待淡出后再修改文字

            // 4. 强制刷新所有现有环境粒子的颜色，使其立即融入新主题
            particles.forEach(p => {
                if (!p.isBurst) p.color = getRandomColor();
            });

            // 5. 瞬间爆发大量符合新主题颜色的粒子
            for (let i = 0; i < CONFIG.BURST_COUNT; i++) {
                const offsetX = random(-30, 30);
                const offsetY = random(-30, 30);
                particles.push(new Particle(heartCenter.x + offsetX, heartCenter.y + offsetY, true));
            }
        }

        heartEl.addEventListener('mousedown', toggleThemeAndBurst);
        heartEl.addEventListener('touchstart', (e) => {
            e.preventDefault(); 
            toggleThemeAndBurst();
        }, { passive: false });

        /* ==========================================
           9. 渲染循环 (Render Loop)
           ========================================== */
        function animate() {
            // 根据当前主题，绘制不同的动态模糊拖影层
            const blurColors = THEMES[currentTheme].bgBlur;
            const bgGradient = ctx.createRadialGradient(width/2, height/2, 0, width/2, height/2, width/1.2);
            bgGradient.addColorStop(0, blurColors[0]);
            bgGradient.addColorStop(0.6, blurColors[1]);
            bgGradient.addColorStop(1, blurColors[2]);
            
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, width, height);

            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.update();
                p.draw();
                if (p.isBurst && p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
            requestAnimationFrame(animate);
        }

        // 启动
        resize();
        initParticles();
        animate();
    </script>
</body>
</html>
